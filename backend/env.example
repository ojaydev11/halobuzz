# ===========================================
# HALOBUZZ BACKEND CONFIGURATION
# ===========================================
# Copy this file to .env and update with your values
# Never commit .env files to version control

# ===========================================
# SERVER CONFIGURATION
# ===========================================
NODE_ENV=development
PORT=5010
TZ=Australia/Sydney

# CORS Configuration (comma-separated origins)
CORS_ORIGIN=http://localhost:19006,http://localhost:3000,http://localhost:8080

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# MongoDB Connection String
MONGODB_URI=mongodb+srv://<user>:<pass>@<cluster>/<db>?retryWrites=true&w=majority

# Redis Connection String
REDIS_URL=redis://localhost:6379

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# JWT Secret (MUST be changed in production - use a secure random string)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=NONE_CHANGE_ME_TO_SECURE_64_CHAR_HEX_STRING_IN_PRODUCTION
JWT_REFRESH_SECRET=NONE_CHANGE_ME_TO_DIFFERENT_SECURE_64_CHAR_HEX_STRING_IN_PRODUCTION

# Encryption Key (32 bytes - 64 hex characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=NONE_CHANGE_ME_TO_SECURE_32_BYTE_HEX_STRING_IN_PRODUCTION
JWT_ACCESS_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Security Settings
BCRYPT_ROUNDS=12
SESSION_TIMEOUT=86400000
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900000

# ===========================================
# EXTERNAL SERVICES
# ===========================================
# Agora Video SDK
AGORA_APP_ID=your-agora-app-id
AGORA_APP_CERT=your-agora-app-certificate

# ===========================================
# AWS S3 CONFIGURATION
# ===========================================
S3_BUCKET=your-s3-bucket-name
S3_REGION=us-east-1
S3_ACCESS_KEY=your-aws-access-key
S3_SECRET_KEY=your-aws-secret-key

# ===========================================
# PAYMENT GATEWAYS
# ===========================================
# Stripe
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# eSewa (Nepal)
ESEWA_MERCHANT_ID=your-esewa-merchant-id
ESEWA_SECRET=your-esewa-secret-key

# Khalti (Nepal)
KHALTI_PUBLIC_KEY=test_public_key_your_khalti_public_key
KHALTI_SECRET_KEY=test_secret_key_your_khalti_secret_key

# PayPal
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_ENVIRONMENT=sandbox

# ===========================================
# AI SERVICES
# ===========================================
# OpenAI API
OPENAI_API_KEY=sk-your-openai-api-key

# AI Engine Service
AI_ENGINE_URL=http://localhost:5020
AI_ENGINE_SECRET=your-ai-engine-secret

# ===========================================
# ANALYTICS & BUSINESS INTELLIGENCE
# ===========================================
# Reports Configuration
REPORTS_TZ=Australia/Sydney
REPORTS_STORAGE_DIR=./storage/reports

# Analytics Database (optional separate MongoDB instance)
ANALYTICS_DB_URI=mongodb+srv://<user>:<pass>@<cluster>/<analytics_db>?retryWrites=true&w=majority

# Alert Configuration
ALERT_DROP_PCT=15
ALERT_PAYER_DROP_PCT=10
ALERT_ABUSE_THRESHOLD=50
ALERT_INFRA_THRESHOLD=100
ALERT_CHURN_THRESHOLD=20
ALERT_ENGAGEMENT_DROP_PCT=15
ALERT_INTERVAL_MIN=15

# Notification Webhooks (optional)
ADMIN_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=your-telegram-chat-id

# ===========================================
# BUSINESS AI CONFIGURATION
# ===========================================
# Simulation Engine
SIM_MAX_HORIZON_DAYS=60

# Business AI Rate Limiting
BUSINESS_AI_RATE_LIMIT_PER_MIN=30

# Offline Exports & Sync
OFFLINE_EXPORTS_DIR=./storage/exports
DRIVE_SYNC_DIR=/path/to/drive/sync
SHIVX_SYNC_DIR=/path/to/shivx/sync
LOCAL_SYNC_DIR=/path/to/local/sync

# Empire Mode (Multi-App Support)
DEFAULT_APP_ID=halobuzz
ENABLE_EMPIRE_MODE=true

# ===========================================
# COMMUNICATION SERVICES
# ===========================================
# SendGrid (Email)
SENDGRID_API_KEY=SG.your-sendgrid-api-key

# Twilio (SMS)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# ===========================================
# FEATURE FLAGS
# ===========================================
# Enable/disable features (true/false)
ENABLE_AI=true
ENABLE_PAYMENTS=true
ENABLE_NOTIFICATIONS=true
ENABLE_MODERATION=true
ENABLE_ANALYTICS=true

# ===========================================
# DEVELOPMENT SETTINGS
# ===========================================
# These are safe defaults for development
# In production, ensure all secrets are properly configured

# Logging Level (error, warn, info, debug)
LOG_LEVEL=info

# Enable detailed error responses (development only)
DETAILED_ERRORS=true

# ===========================================
# PRODUCTION NOTES
# Security Configuration
ADMIN_TOTP_REQUIRED=true
ADMIN_EMAILS=admin@halobuzz.com,security@halobuzz.com
ENABLE_DEVICE_BINDING=true
ENABLE_IP_PINNING=false
ADMIN_ALLOWED_IPS=127.0.0.1,::1

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Security Monitoring
SECURITY_MONITORING_ENABLED=true
SECURITY_ALERT_EMAIL=security@halobuzz.com

# ===========================================
# For production deployment:
# 1. Set NODE_ENV=production
# 2. Use strong, unique JWT_SECRET (64+ characters)
# 3. Configure all payment gateways
# 4. Set up proper MongoDB and Redis instances
# 5. Configure AWS S3 with proper permissions
# 6. Set up monitoring and logging
# 7. Enable rate limiting and security headers
# 8. Configure SSL/TLS certificates
# 9. Enable 2FA for all admin accounts
# 10. Configure security monitoring and alerting